import{f as A,p as z}from"./api.12427e84.js";import{_ as ee,r as d,l as le,b as r,c as ae,o as p,d as V,h as a,g as t,e as C,F as N,p as T,i as g,w as te,f as U,m as D,E as P}from"./index.eaac7b27.js";const oe={class:"search-controls"},ue={class:"dialog-footer"},ne={class:"dialog-footer"},de={__name:"DiseCategory",setup(re){const M=d(!1),m=d({}),k=d([]),w=d(""),x=d(""),F=d(10),G=[10,20,30,50],B=d(1),y=d(!1),_=d(!1),$=d(null),q=d(null),o=d({id:"",dicaCode:"",dicaName:"",sequenceNo:null,dicaType:""}),S=d({dicaType:[{required:!0,message:"\u8BF7\u9009\u4E2D\u75BE\u75C5\u7C7B\u578B",trigger:"change"}],dicaCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7C7B\u7F16\u7801",trigger:"blur"}],dicaName:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",trigger:"blur"}],sequenceNo:[{required:!0,message:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\u53F7",trigger:"blur"},{type:"number",message:"\u663E\u793A\u987A\u5E8F\u53F7\u5FC5\u987B\u4E3A\u6570\u5B57"}]});le(async()=>{i(1),H(14,100,k)});async function H(u,e,n){let c=`/constantitem/page?ctype=${u}&count=${e}&pn=1`;const s=await A(c,null);s.result?n.value=s.data.records:s.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}async function i(u){M.value=!0;let e=`/disecategory/page?count=${F.value}&pn=${u}`;w.value&&(e+=`&keyword=${w.value}`),x.value&&(e+=`&ctype=${x.value}`);const n=await A(e,null);n.result?(m.value=n.data,M.value=!1):n.errMsg=="\u672A\u767B\u5F55"&&router.push("/login")}function J(u){i(u)}function K(u){_.value=!0,o.value={...u}}function I(u){const e=u==="edit"?q.value:$.value;e&&e.resetFields(),o.value={id:"",dicaCode:"",dicaName:"",sequenceNo:null,dicaType:""}}async function O(){!q.value||await q.value.validate(u=>{u&&z("/disecategory/update",o.value).then(e=>{e.data.result?(_.value=!1,i(m.value.current),D.success("\u4FEE\u6539\u6210\u529F")):D.error(e.data.errMsg||"\u4FEE\u6539\u5931\u8D25")})})}async function Q(){!$.value||await $.value.validate(u=>{u&&z("/disecategory/add",o.value).then(e=>{e.data.result?(y.value=!1,B.value=1,i(1),D.success("\u65B0\u589E\u6210\u529F")):D.error(e.data.errMsg||"\u65B0\u589E\u5931\u8D25")})})}function W(u){P.confirm("\u786E\u8BA4\u662F\u5426\u5220\u9664?","\u63D0\u9192",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{var e=new FormData;e.append("id",u),z("/disecategory/del",e).then(n=>{n.data.result?(i(m.value.current),P.alert("\u5220\u9664\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&router.push("/login"),P.alert(n.data.errMsg,"\u63D0\u793A",{}))})})}return(u,e)=>{const n=r("el-option"),c=r("el-select"),s=r("el-input"),f=r("el-button"),R=r("el-row"),b=r("el-table-column"),X=r("el-table"),E=r("el-col"),Y=r("el-pagination"),v=r("el-form-item"),L=r("el-form"),j=r("el-dialog"),Z=ae("loading");return p(),V(N,null,[a(R,{class:"search-bar"},{default:t(()=>[C("div",oe,[a(c,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),filterable:"",clearable:"",onClear:e[1]||(e[1]=l=>i(1)),placeholder:"\u75BE\u75C5\u5206\u7C7B",onChange:e[2]||(e[2]=l=>i(1))},{default:t(()=>[(p(!0),V(N,null,T(k.value,l=>(p(),U(n,{key:l.id,label:l.constantCode+l.constantName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(s,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=l=>w.value=l),modelModifiers:{trim:!0},clearable:"",onClear:e[4]||(e[4]=l=>i(1)),placeholder:"\u8BF7\u8F93\u5165\u75BE\u75C5\u5206\u7C7B\u7F16\u7801\u6216\u540D\u79F0"},null,8,["modelValue"]),a(f,{type:"primary",onClick:e[5]||(e[5]=l=>i(1))},{default:t(()=>e[24]||(e[24]=[g("\u67E5\u8BE2")])),_:1,__:[24]})]),a(f,{type:"primary",onClick:e[6]||(e[6]=l=>y.value=!0)},{default:t(()=>e[25]||(e[25]=[g("\u65B0\u589E\u75BE\u75C5\u5206\u7C7B")])),_:1,__:[25]})]),_:1}),e[32]||(e[32]=C("div",{style:{"margin-top":"40px"}},null,-1)),a(R,{class:"m-2"},{default:t(()=>[a(E,{span:24},{default:t(()=>[te((p(),U(X,{data:m.value.records,style:{width:"100%"}},{default:t(()=>[a(b,{fixed:"",type:"index",label:"\u5E8F\u53F7",align:"center",width:"80",index:l=>(m.value.current-1)*m.value.size+l+1},null,8,["index"]),a(b,{prop:"dicaCode",label:"\u5206\u7C7B\u7F16\u7801",align:"center"}),a(b,{prop:"dicaName",label:"\u5206\u7C7B\u540D\u79F0",align:"center"}),a(b,{prop:"dicaTypeName",label:"\u5206\u7C7B",align:"center"}),a(b,{fixed:"right",label:"\u64CD\u4F5C",align:"center"},{default:t(l=>[a(f,{link:"",type:"primary",onClick:h=>K(l.row)},{default:t(()=>e[26]||(e[26]=[g("\u7F16\u8F91")])),_:2,__:[26]},1032,["onClick"]),a(f,{link:"",type:"danger",onClick:h=>W(l.row.id)},{default:t(()=>e[27]||(e[27]=[g("\u5220\u9664")])),_:2,__:[27]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Z,M.value]])]),_:1})]),_:1}),e[33]||(e[33]=C("div",{style:{"margin-top":"20px"}},null,-1)),a(R,null,{default:t(()=>[a(E,{span:20},{default:t(()=>[a(Y,{background:"",layout:"prev, pager, next",total:m.value.total,"page-count":m.value.pages,"current-page":B.value,"onUpdate:currentPage":e[7]||(e[7]=l=>B.value=l),onCurrentChange:J},null,8,["total","page-count","current-page"])]),_:1}),a(E,{span:4},{default:t(()=>[a(c,{modelValue:F.value,"onUpdate:modelValue":e[8]||(e[8]=l=>F.value=l),class:"w-20 m-2",placeholder:"\u6BCF\u9875\u884C\u6570",onChange:e[9]||(e[9]=l=>i(1))},{default:t(()=>[(p(),V(N,null,T(G,l=>a(n,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(j,{modelValue:_.value,"onUpdate:modelValue":e[15]||(e[15]=l=>_.value=l),title:"\u7F16\u8F91",onClose:e[16]||(e[16]=l=>I("edit"))},{footer:t(()=>[C("span",ue,[a(f,{onClick:e[14]||(e[14]=l=>_.value=!1)},{default:t(()=>e[28]||(e[28]=[g("\u53D6\u6D88")])),_:1,__:[28]}),a(f,{type:"primary",onClick:O},{default:t(()=>e[29]||(e[29]=[g(" \u4FDD\u5B58 ")])),_:1,__:[29]})])]),default:t(()=>[a(L,{model:o.value,rules:S.value,ref_key:"editFormRef",ref:q,"label-width":"120px"},{default:t(()=>[a(v,{label:"\u75BE\u75C5\u5206\u7C7B",prop:"dicaType"},{default:t(()=>[a(c,{modelValue:o.value.dicaType,"onUpdate:modelValue":e[10]||(e[10]=l=>o.value.dicaType=l),filterable:"",placeholder:"\u75BE\u75C5\u5206\u7C7B"},{default:t(()=>[(p(!0),V(N,null,T(k.value,l=>(p(),U(n,{key:l.id,label:l.constantName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"\u5206\u7C7B\u7F16\u7801",prop:"dicaCode"},{default:t(()=>[a(s,{modelValue:o.value.dicaCode,"onUpdate:modelValue":e[11]||(e[11]=l=>o.value.dicaCode=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(v,{label:"\u5206\u7C7B\u540D\u79F0",prop:"dicaName"},{default:t(()=>[a(s,{modelValue:o.value.dicaName,"onUpdate:modelValue":e[12]||(e[12]=l=>o.value.dicaName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(v,{label:"\u663E\u793A\u987A\u5E8F\u53F7",prop:"sequenceNo"},{default:t(()=>[a(s,{modelValue:o.value.sequenceNo,"onUpdate:modelValue":e[13]||(e[13]=l=>o.value.sequenceNo=l),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(j,{modelValue:y.value,"onUpdate:modelValue":e[22]||(e[22]=l=>y.value=l),title:"\u65B0\u589E",onClose:e[23]||(e[23]=l=>I("add"))},{footer:t(()=>[C("span",ne,[a(f,{onClick:e[21]||(e[21]=l=>y.value=!1)},{default:t(()=>e[30]||(e[30]=[g("\u53D6\u6D88")])),_:1,__:[30]}),a(f,{type:"primary",onClick:Q},{default:t(()=>e[31]||(e[31]=[g(" \u65B0\u589E ")])),_:1,__:[31]})])]),default:t(()=>[a(L,{model:o.value,rules:S.value,ref_key:"addFormRef",ref:$,"label-width":"120px"},{default:t(()=>[a(v,{label:"\u75BE\u75C5\u5206\u7C7B",prop:"dicaType"},{default:t(()=>[a(c,{modelValue:o.value.dicaType,"onUpdate:modelValue":e[17]||(e[17]=l=>o.value.dicaType=l),filterable:"",placeholder:"\u75BE\u75C5\u5206\u7C7B"},{default:t(()=>[(p(!0),V(N,null,T(k.value,l=>(p(),U(n,{key:l.id,label:l.constantName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"\u5206\u7C7B\u7F16\u7801",prop:"dicaCode"},{default:t(()=>[a(s,{modelValue:o.value.dicaCode,"onUpdate:modelValue":e[18]||(e[18]=l=>o.value.dicaCode=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(v,{label:"\u5206\u7C7B\u540D\u79F0",prop:"dicaName"},{default:t(()=>[a(s,{modelValue:o.value.dicaName,"onUpdate:modelValue":e[19]||(e[19]=l=>o.value.dicaName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(v,{label:"\u663E\u793A\u987A\u5E8F\u53F7",prop:"sequenceNo"},{default:t(()=>[a(s,{modelValue:o.value.sequenceNo,"onUpdate:modelValue":e[20]||(e[20]=l=>o.value.sequenceNo=l),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}};var pe=ee(de,[["__scopeId","data-v-963318c8"]]);export{pe as default};
