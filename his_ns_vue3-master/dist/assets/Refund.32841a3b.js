import{f as $,p as I}from"./api.12427e84.js";import{a as R,r as d,l as F,x as L,s as P,b as s,c as q,o as _,d as y,h as e,g as t,e as k,F as x,i as v,w as z,f as A,t as O,p as j,E as G,m as V}from"./index.eaac7b27.js";import{f as H}from"./utils.1f1ce994.js";const Y={__name:"Refund",setup(J){const C=R(),g=d(!1),u=d({}),c=d(""),b=d(""),m=d(10),D=[10,20,30,50],N=d(1);F(async()=>{p(1)}),L(()=>{p(1)});async function p(i){g.value=!0;try{N.value=i;var a=H(new Date);const l=new URLSearchParams;l.append("pn",i),l.append("count",m.value),l.append("state",1),l.append("regDate",a),l.append("_",new Date().getTime()),c.value&&l.append("keyword",c.value),b.value&&l.append("deptId",b.value);const o=await $(`/register/page?${l.toString()}`,null);o.result?u.value=o.data:o.errMsg=="\u672A\u767B\u5F55"&&P.push("/login")}finally{g.value=!1}}function B(i){p(i)}function h(i){G.confirm("\u786E\u8BA4\u662F\u5426\u9000\u53F7?","\u63D0\u9192",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{var a={registerVo:i,userVo:C.getUserInfo.value};I("/register/backOff",a).then(l=>{l.data.result?(V.success("\u9000\u53F7\u6210\u529F"),u.value.records.length===1&&u.value.current>1?p(u.value.current-1):p(u.value.current)):V.error(l.data.errMsg||"\u9000\u53F7\u5931\u8D25")})})}return(i,a)=>{const l=s("el-input"),o=s("el-col"),w=s("el-button"),f=s("el-row"),r=s("el-table-column"),M=s("el-table"),S=s("el-pagination"),U=s("el-option"),E=s("el-select"),T=q("loading");return _(),y(x,null,[e(f,null,{default:t(()=>[e(o,{span:5},{default:t(()=>[e(l,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=n=>c.value=n),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D\u6216\u624B\u673A\u6216\u8EAB\u4EFD\u8BC1\u53F7\u7801",class:"w-100 m-2"},null,8,["modelValue"])]),_:1}),e(o,{span:1}),e(o,{span:4,class:"m-2"},{default:t(()=>[e(w,{type:"primary",onClick:a[1]||(a[1]=n=>p(1))},{default:t(()=>a[4]||(a[4]=[v("\u67E5\u8BE2")])),_:1,__:[4]})]),_:1}),e(o,{span:10})]),_:1}),a[6]||(a[6]=k("div",{style:{"margin-top":"40px"}},null,-1)),e(f,{class:"m-2"},{default:t(()=>[e(o,{span:24},{default:t(()=>[z((_(),A(M,{data:u.value.records,style:{width:"100%"}},{default:t(()=>[e(r,{prop:"caseNumber",label:"\u75C5\u5386\u53F7",align:"center",width:"90"}),e(r,{prop:"realName",label:"\u59D3\u540D",align:"center",width:"100"}),e(r,{prop:"gender",label:"\u6027\u522B",width:"70",align:"center"},{default:t(n=>[v(O(n.row.gender==71?"\u7537":"\u5973"),1)]),_:1}),e(r,{prop:"idNumber",label:"\u8EAB\u4EFD\u8BC1",align:"center",width:"180"}),e(r,{prop:"visitDate",label:"\u6302\u53F7\u65E5\u671F",align:"center"}),e(r,{prop:"noon",label:"\u5348\u522B",align:"center"}),e(r,{prop:"deptName",label:"\u79D1\u5BA4",align:"center"}),e(r,{prop:"doctorName",label:"\u533B\u751F",align:"center"}),e(r,{prop:"registName",label:"\u53F7\u522B",align:"center"}),e(r,{fixed:"right",label:"\u64CD\u4F5C",align:"center"},{default:t(n=>[e(w,{link:"",type:"danger",onClick:K=>h(n.row)},{default:t(()=>a[5]||(a[5]=[v("\u9000\u53F7")])),_:2,__:[5]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,g.value]])]),_:1})]),_:1}),a[7]||(a[7]=k("div",{style:{"margin-top":"20px"}},null,-1)),e(f,null,{default:t(()=>[e(o,{span:20},{default:t(()=>[e(S,{background:"",layout:"prev, pager, next",total:u.value.total,"page-count":u.value.pages,onCurrentChange:B},null,8,["total","page-count"])]),_:1}),e(o,{span:4},{default:t(()=>[e(E,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=n=>m.value=n),class:"w-20 m-2",placeholder:"\u6BCF\u9875\u884C\u6570",onChange:a[3]||(a[3]=n=>p(1))},{default:t(()=>[(_(),y(x,null,j(D,n=>e(U,{key:n,label:n,value:n},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)}}};export{Y as default};
