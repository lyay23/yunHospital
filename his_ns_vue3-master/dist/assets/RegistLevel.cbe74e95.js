import{f as K,p as q}from"./api.12427e84.js";import{_ as O,r as n,l as W,s as X,b as s,c as Y,o as U,d as B,h as l,g as o,e as V,F as D,i as p,w as Z,f as h,p as ee,m as v,E as le}from"./index.eaac7b27.js";const te={class:"search-controls"},oe={class:"dialog-footer"},ae={class:"dialog-footer"},ue={__name:"RegistLevel",setup(re){const N=n(!1),i=n({});n([]);const y=n(""),k=n(10),E=[10,20,30,50],w=n(1),_=n(!1),b=n(!1),C=n(null),c=n(null),a=n({id:"",registCode:"",registName:"",sequenceNo:null,registFee:null,registQuota:null}),M=n({registCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u53F7\u522B\u7F16\u7801",trigger:"blur"}],registName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7C7B\u522B\u540D\u79F0",trigger:"blur"}],sequenceNo:[{required:!0,message:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\u53F7",trigger:"blur"},{type:"number",message:"\u663E\u793A\u987A\u5E8F\u53F7\u4E3A\u6570\u5B57"}],registFee:[{required:!0,message:"\u8BF7\u8F93\u5165\u6302\u53F7\u8D39",trigger:"blur"},{type:"number",message:"\u663E\u793A\u6302\u53F7\u8D39\u4E3A\u6570\u5B57"}],registQuota:[{required:!0,message:"\u8BF7\u8F93\u5165\u6302\u53F7\u9650\u989D",trigger:"blur"},{type:"number",message:"\u663E\u793A\u6302\u53F7\u9650\u989D\u4E3A\u6570\u5B57"}]});W(async()=>{f(1)});async function f(r){N.value=!0;let e=`/registlevel/page?count=${k.value}&pn=${r}`;y.value&&(e+=`&keyword=${y.value}`);const u=await K(e,null);u.result?(i.value=u.data,N.value=!1):u.errMsg=="\u672A\u767B\u5F55"&&X.push("/login")}function L(r){f(r)}function T(r){b.value=!0,a.value={...r}}function $(r){const e=r==="edit"?c.value:C.value;e&&e.resetFields(),a.value={id:"",registCode:"",registName:"",sequenceNo:null,registFee:null,registQuota:null}}async function z(){!c.value||await c.value.validate(r=>{r&&q("/registlevel/update",a.value).then(e=>{e.data.result?(b.value=!1,f(i.value.current),v.success("\u4FEE\u6539\u6210\u529F")):v.error(e.data.errMsg||"\u4FEE\u6539\u5931\u8D25")})})}async function P(){!C.value||await C.value.validate(r=>{r&&q("/registlevel/add",a.value).then(e=>{e.data.result?(_.value=!1,w.value=1,f(1),v.success("\u65B0\u589E\u6210\u529F")):v.error(e.data.errMsg||"\u65B0\u589E\u5931\u8D25")})})}function S(r){le.confirm("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6761\u8BB0\u5F55\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{q(`/registlevel/del?id=${r}`,null).then(e=>{e.data.result?(v({type:"success",message:"\u5220\u9664\u6210\u529F"}),f(i.value.current)):v.error(e.data.errMsg)})}).catch(()=>{v({type:"info",message:"\u5220\u9664\u5DF2\u53D6\u6D88"})})}return(r,e)=>{const u=s("el-input"),m=s("el-button"),x=s("el-row"),g=s("el-table-column"),I=s("el-table"),F=s("el-col"),j=s("el-pagination"),A=s("el-option"),G=s("el-select"),d=s("el-form-item"),Q=s("el-form"),R=s("el-dialog"),H=Y("loading");return U(),B(D,null,[l(x,{class:"search-bar"},{default:o(()=>[V("div",te,[l(u,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=t=>y.value=t),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u53F7\u522B\u7F16\u7801\u6216\u540D\u79F0"},null,8,["modelValue"]),l(m,{type:"primary",onClick:e[1]||(e[1]=t=>f(1))},{default:o(()=>e[22]||(e[22]=[p("\u67E5\u8BE2")])),_:1,__:[22]})]),l(m,{type:"primary",onClick:e[2]||(e[2]=t=>_.value=!0)},{default:o(()=>e[23]||(e[23]=[p("\u65B0\u589E\u6302\u53F7\u7EA7\u522B")])),_:1,__:[23]})]),_:1}),e[30]||(e[30]=V("div",{style:{"margin-top":"40px"}},null,-1)),l(x,{class:"m-2"},{default:o(()=>[l(F,{span:24},{default:o(()=>[Z((U(),h(I,{data:i.value.records,style:{width:"100%"}},{default:o(()=>[l(g,{fixed:"",type:"index",label:"\u5E8F\u53F7",align:"center",width:"80",index:t=>(i.value.current-1)*i.value.size+t+1},null,8,["index"]),l(g,{prop:"registCode",label:"\u53F7\u522B\u7F16\u7801",align:"center"}),l(g,{prop:"registName",label:"\u53F7\u522B\u540D\u79F0",align:"center"}),l(g,{prop:"sequenceNo",label:"\u663E\u793A\u987A\u5E8F\u53F7",align:"center"}),l(g,{prop:"registFee",label:"\u6302\u53F7\u8D39",align:"center"}),l(g,{prop:"registQuota",label:"\u6302\u53F7\u9650\u989D",align:"center"}),l(g,{fixed:"right",label:"\u64CD\u4F5C",align:"center"},{default:o(t=>[l(m,{link:"",type:"primary",onClick:J=>T(t.row)},{default:o(()=>e[24]||(e[24]=[p("\u7F16\u8F91")])),_:2,__:[24]},1032,["onClick"]),l(m,{link:"",type:"danger",onClick:J=>S(t.row.id)},{default:o(()=>e[25]||(e[25]=[p("\u5220\u9664")])),_:2,__:[25]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,N.value]])]),_:1})]),_:1}),e[31]||(e[31]=V("div",{style:{"margin-top":"20px"}},null,-1)),l(x,null,{default:o(()=>[l(F,{span:20},{default:o(()=>[l(j,{background:"",layout:"prev, pager, next",total:i.value.total,"page-count":i.value.pages,"current-page":w.value,"onUpdate:currentPage":e[3]||(e[3]=t=>w.value=t),onCurrentChange:L},null,8,["total","page-count","current-page"])]),_:1}),l(F,{span:4},{default:o(()=>[l(G,{modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=t=>k.value=t),class:"w-20 m-2",placeholder:"\u6BCF\u9875\u884C\u6570",onChange:e[5]||(e[5]=t=>f(1))},{default:o(()=>[(U(),B(D,null,ee(E,t=>l(A,{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(R,{modelValue:b.value,"onUpdate:modelValue":e[12]||(e[12]=t=>b.value=t),title:"\u7F16\u8F91",onClose:e[13]||(e[13]=t=>$("edit"))},{footer:o(()=>[V("span",oe,[l(m,{onClick:e[11]||(e[11]=t=>b.value=!1)},{default:o(()=>e[26]||(e[26]=[p("\u53D6\u6D88")])),_:1,__:[26]}),l(m,{type:"primary",onClick:z},{default:o(()=>e[27]||(e[27]=[p(" \u4FDD\u5B58 ")])),_:1,__:[27]})])]),default:o(()=>[l(Q,{model:a.value,rules:M.value,ref_key:"editFormRef",ref:c,"label-width":"100px"},{default:o(()=>[l(d,{label:"\u53F7\u522B\u7F16\u7801",prop:"registCode"},{default:o(()=>[l(u,{modelValue:a.value.registCode,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.registCode=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u53F7\u522B\u540D\u79F0",prop:"registName"},{default:o(()=>[l(u,{modelValue:a.value.registName,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.registName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u663E\u793A\u987A\u5E8F\u53F7",prop:"sequenceNo"},{default:o(()=>[l(u,{modelValue:a.value.sequenceNo,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.sequenceNo=t),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u6302\u53F7\u8D39",prop:"registFee"},{default:o(()=>[l(u,{modelValue:a.value.registFee,"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.registFee=t),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u6302\u53F7\u9650\u989D",prop:"registQuota"},{default:o(()=>[l(u,{modelValue:a.value.registQuota,"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.registQuota=t),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),l(R,{modelValue:_.value,"onUpdate:modelValue":e[20]||(e[20]=t=>_.value=t),title:"\u65B0\u589E",onClose:e[21]||(e[21]=t=>$("add"))},{footer:o(()=>[V("span",ae,[l(m,{onClick:e[19]||(e[19]=t=>_.value=!1)},{default:o(()=>e[28]||(e[28]=[p("\u53D6\u6D88")])),_:1,__:[28]}),l(m,{type:"primary",onClick:P},{default:o(()=>e[29]||(e[29]=[p(" \u65B0\u589E ")])),_:1,__:[29]})])]),default:o(()=>[l(Q,{model:a.value,rules:M.value,ref_key:"addFormRef",ref:C,"label-width":"100px"},{default:o(()=>[l(d,{label:"\u53F7\u522B\u7F16\u7801",prop:"registCode"},{default:o(()=>[l(u,{modelValue:a.value.registCode,"onUpdate:modelValue":e[14]||(e[14]=t=>a.value.registCode=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u53F7\u522B\u540D\u79F0",prop:"registName"},{default:o(()=>[l(u,{modelValue:a.value.registName,"onUpdate:modelValue":e[15]||(e[15]=t=>a.value.registName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u663E\u793A\u987A\u5E8F\u53F7",prop:"sequenceNo"},{default:o(()=>[l(u,{modelValue:a.value.sequenceNo,"onUpdate:modelValue":e[16]||(e[16]=t=>a.value.sequenceNo=t),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u6302\u53F7\u8D39",prop:"registFee"},{default:o(()=>[l(u,{modelValue:a.value.registFee,"onUpdate:modelValue":e[17]||(e[17]=t=>a.value.registFee=t),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u6302\u53F7\u9650\u989D",prop:"registQuota"},{default:o(()=>[l(u,{modelValue:a.value.registQuota,"onUpdate:modelValue":e[18]||(e[18]=t=>a.value.registQuota=t),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}};var de=O(ue,[["__scopeId","data-v-6b0c7537"]]);export{de as default};
