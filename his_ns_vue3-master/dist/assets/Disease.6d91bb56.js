import{f as A,p as S}from"./api.12427e84.js";import{_ as le,r as s,l as ae,b as d,c as oe,o as i,d as c,h as a,g as o,e as D,F as k,s as te,m as v,p as $,i as f,w as ue,f as M,E as se}from"./index.eaac7b27.js";const de={class:"search-controls"},ne={class:"dialog-footer"},re={class:"dialog-footer"},ie={__name:"Disease",setup(pe){const I=s(!1),g=s({}),F=s(10),j=[10,20,30,50],_=s(1),w=s(""),x=s(""),N=s([]),b=s(!1),y=s(!1),B=s(null),R=s(null),t=s({}),G={id:null,diseaseCode:"",diseaseName:"",diseaseICD:"",diseCategoryID:""},P=s({diseaseCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u75BE\u75C5\u7F16\u7801",trigger:"blur"}],diseaseName:[{required:!0,message:"\u8BF7\u8F93\u5165\u75BE\u75C5\u540D\u79F0",trigger:"blur"}],diseaseICD:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FD\u9645ICD\u7801",trigger:"blur"}],diseCategoryID:[{required:!0,message:"\u8BF7\u9009\u62E9\u75BE\u75C5\u5206\u7C7B",trigger:"change"}]});function r(u=1){if(I.value)return;I.value=!0,_.value=u;const e=new URLSearchParams;e.append("pn",u),e.append("count",F.value),w.value&&e.append("keyword",w.value),x.value&&e.append("ctype",x.value),A(`/disease/page?${e.toString()}`).then(n=>{n.result?g.value=n.data:n.errMsg==="\u672A\u767B\u5F55"?te.push("/login"):v.error(n.errMsg||"\u6570\u636E\u52A0\u8F7D\u5931\u8D25")}).catch(n=>{console.error(n),v.error("\u8BF7\u6C42\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}).finally(()=>{I.value=!1})}const H=async()=>{const u=await A("/disecategory/page?count=1000");u.result&&(N.value=u.data.records)};ae(()=>{r(),H()});function J(u){r(u)}const T=u=>{const e=u==="add"?B.value:R.value;e&&e.resetFields()},K=()=>{t.value={...G},b.value=!0},O=()=>{B.value.validate(u=>{u&&S("/disease/add",t.value).then(e=>{e.result?(v.success("\u65B0\u589E\u6210\u529F"),b.value=!1,r(1)):v.error(e.errMsg||"\u65B0\u589E\u5931\u8D25")})})},Q=u=>{t.value={...u},y.value=!0},W=()=>{R.value.validate(u=>{u&&S("/disease/update",t.value).then(e=>{e.result?(v.success("\u4FEE\u6539\u6210\u529F"),y.value=!1,r(_.value)):v.error(e.errMsg||"\u4FEE\u6539\u5931\u8D25")})})},X=u=>{se.confirm("\u786E\u8BA4\u5220\u9664\u8BE5\u75BE\u75C5\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{S(`/disease/del?id=${u}`).then(e=>{e.result?(v.success("\u5220\u9664\u6210\u529F"),g.value.records.length===1&&_.value>1&&_.value--,r(_.value)):v.error(e.errMsg||"\u5220\u9664\u5931\u8D25")})}).catch(()=>{})};return(u,e)=>{const n=d("el-option"),U=d("el-select"),C=d("el-input"),p=d("el-button"),q=d("el-row"),V=d("el-table-column"),Y=d("el-table"),E=d("el-col"),Z=d("el-pagination"),m=d("el-form-item"),z=d("el-form"),L=d("el-dialog"),h=oe("loading");return i(),c(k,null,[a(q,{class:"search-bar"},{default:o(()=>[D("div",de,[a(U,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),filterable:"",clearable:"",onClear:e[1]||(e[1]=l=>r(1)),placeholder:"\u75BE\u75C5\u5206\u7C7B",onChange:e[2]||(e[2]=l=>r(1))},{default:o(()=>[(i(!0),c(k,null,$(N.value,l=>(i(),M(n,{key:l.id,label:l.dicaCode+l.dicaName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(C,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=l=>w.value=l),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u75BE\u75C5\u7F16\u7801\u6216\u540D\u79F0"},null,8,["modelValue"]),a(p,{type:"primary",onClick:e[4]||(e[4]=l=>r(1))},{default:o(()=>e[22]||(e[22]=[f("\u67E5\u8BE2")])),_:1,__:[22]})]),a(p,{type:"primary",onClick:K},{default:o(()=>e[23]||(e[23]=[f("\u65B0\u589E\u8BCA\u65AD\u75BE\u75C5")])),_:1,__:[23]})]),_:1}),e[30]||(e[30]=D("div",{style:{"margin-top":"40px"}},null,-1)),a(q,{class:"m-2"},{default:o(()=>[a(E,{span:24},{default:o(()=>[ue((i(),M(Y,{data:g.value.records,style:{width:"100%"}},{default:o(()=>[a(V,{fixed:"",type:"index",label:"\u5E8F\u53F7",align:"center",width:"80",index:l=>(g.value.current-1)*g.value.size+l+1},null,8,["index"]),a(V,{prop:"diseaseCode",label:"\u75BE\u75C5\u7F16\u7801",align:"center"}),a(V,{prop:"diseaseName",label:"\u75BE\u75C5\u540D\u79F0",align:"center"}),a(V,{prop:"diseaseICD",label:"\u56FD\u9645ICD\u7F16\u7801",align:"center"}),a(V,{prop:"dicaName",label:"\u75BE\u75C5\u5206\u7C7B",align:"center"}),a(V,{fixed:"right",label:"\u64CD\u4F5C",align:"center"},{default:o(l=>[a(p,{link:"",type:"primary",onClick:ee=>Q(l.row)},{default:o(()=>e[24]||(e[24]=[f("\u7F16\u8F91")])),_:2,__:[24]},1032,["onClick"]),a(p,{link:"",type:"danger",onClick:ee=>X(l.row.id)},{default:o(()=>e[25]||(e[25]=[f("\u5220\u9664")])),_:2,__:[25]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[h,I.value]])]),_:1})]),_:1}),e[31]||(e[31]=D("div",{style:{"margin-top":"20px"}},null,-1)),a(q,null,{default:o(()=>[a(E,{span:20},{default:o(()=>[a(Z,{background:"",layout:"prev, pager, next",total:g.value.total,"page-count":g.value.pages,"current-page":_.value,"onUpdate:currentPage":e[5]||(e[5]=l=>_.value=l),onCurrentChange:J},null,8,["total","page-count","current-page"])]),_:1}),a(E,{span:4},{default:o(()=>[a(U,{modelValue:F.value,"onUpdate:modelValue":e[6]||(e[6]=l=>F.value=l),class:"w-20 m-2",placeholder:"\u6BCF\u9875\u884C\u6570",onChange:e[7]||(e[7]=l=>r(1))},{default:o(()=>[(i(),c(k,null,$(j,l=>a(n,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(L,{modelValue:y.value,"onUpdate:modelValue":e[13]||(e[13]=l=>y.value=l),title:"\u7F16\u8F91",onClose:e[14]||(e[14]=l=>T("edit"))},{footer:o(()=>[D("span",ne,[a(p,{onClick:e[12]||(e[12]=l=>y.value=!1)},{default:o(()=>e[26]||(e[26]=[f("\u53D6\u6D88")])),_:1,__:[26]}),a(p,{type:"primary",onClick:W},{default:o(()=>e[27]||(e[27]=[f(" \u4FDD\u5B58 ")])),_:1,__:[27]})])]),default:o(()=>[a(z,{model:t.value,rules:P.value,ref_key:"editFormRef",ref:R,"label-width":"120px"},{default:o(()=>[a(m,{label:"\u75BE\u75C5\u7F16\u7801",prop:"diseaseCode"},{default:o(()=>[a(C,{modelValue:t.value.diseaseCode,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.diseaseCode=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u75BE\u75C5\u540D\u79F0",prop:"diseaseName"},{default:o(()=>[a(C,{modelValue:t.value.diseaseName,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.diseaseName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u56FD\u9645ICD\u7F16\u7801",prop:"diseaseICD"},{default:o(()=>[a(C,{modelValue:t.value.diseaseICD,"onUpdate:modelValue":e[10]||(e[10]=l=>t.value.diseaseICD=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u75BE\u75C5\u5206\u7C7B",prop:"diseCategoryID"},{default:o(()=>[a(U,{modelValue:t.value.diseCategoryID,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.diseCategoryID=l),filterable:"",placeholder:"\u75BE\u75C5\u5206\u7C7B"},{default:o(()=>[(i(!0),c(k,null,$(N.value,l=>(i(),M(n,{key:l.id,label:l.dicaName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(L,{modelValue:b.value,"onUpdate:modelValue":e[20]||(e[20]=l=>b.value=l),title:"\u65B0\u589E",onClose:e[21]||(e[21]=l=>T("add"))},{footer:o(()=>[D("span",re,[a(p,{onClick:e[19]||(e[19]=l=>b.value=!1)},{default:o(()=>e[28]||(e[28]=[f("\u53D6\u6D88")])),_:1,__:[28]}),a(p,{type:"primary",onClick:O},{default:o(()=>e[29]||(e[29]=[f(" \u65B0\u589E ")])),_:1,__:[29]})])]),default:o(()=>[a(z,{model:t.value,rules:P.value,ref_key:"addFormRef",ref:B,"label-width":"120px"},{default:o(()=>[a(m,{label:"\u75BE\u75C5\u7F16\u7801",prop:"diseaseCode"},{default:o(()=>[a(C,{modelValue:t.value.diseaseCode,"onUpdate:modelValue":e[15]||(e[15]=l=>t.value.diseaseCode=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u75BE\u75C5\u540D\u79F0",prop:"diseaseName"},{default:o(()=>[a(C,{modelValue:t.value.diseaseName,"onUpdate:modelValue":e[16]||(e[16]=l=>t.value.diseaseName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u56FD\u9645ICD\u7F16\u7801",prop:"diseaseICD"},{default:o(()=>[a(C,{modelValue:t.value.diseaseICD,"onUpdate:modelValue":e[17]||(e[17]=l=>t.value.diseaseICD=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u75BE\u75C5\u5206\u7C7B",prop:"diseCategoryID"},{default:o(()=>[a(U,{modelValue:t.value.diseCategoryID,"onUpdate:modelValue":e[18]||(e[18]=l=>t.value.diseCategoryID=l),filterable:"",placeholder:"\u75BE\u75C5\u5206\u7C7B"},{default:o(()=>[(i(!0),c(k,null,$(N.value,l=>(i(),M(n,{key:l.id,label:l.dicaName,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}};var fe=le(ie,[["__scopeId","data-v-28a9a24b"]]);export{fe as default};
