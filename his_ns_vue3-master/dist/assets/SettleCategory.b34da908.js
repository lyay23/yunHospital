import{f as W,p as $}from"./api.12427e84.js";import{_ as X,r as s,l as Y,s as E,b as r,c as Z,o as M,d as S,h as l,g as o,e as V,F as T,i as m,w as h,f as ee,p as le,m as C,E as U}from"./index.eaac7b27.js";const te={class:"search-controls"},oe={class:"dialog-footer"},ae={class:"dialog-footer"},ne={__name:"SettleCategory",setup(ue){const N=s(!1),d=s({});s([]);const y=s(""),k=s(10),z=[10,20,30,50],w=s(1),v=s(!1),g=s(!1),b=s(null),c=s(null),a=s({id:"",settleCode:"",settleName:"",sequenceNo:null}),D=s({settleCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u7ED3\u7B97\u7C7B\u522B\u7F16\u7801",trigger:"blur"}],settleName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7ED3\u7B97\u7C7B\u522B\u540D\u79F0",trigger:"blur"}],sequenceNo:[{required:!0,message:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\u53F7",trigger:"blur"},{type:"number",message:"\u663E\u793A\u987A\u5E8F\u53F7\u5FC5\u987B\u4E3A\u6570\u5B57"}]});Y(async()=>{p(1)});async function p(n){N.value=!0;let e=`/settlecategory/page?count=${k.value}&pn=${n}`;y!=""&&(e+=`&keyword=${y.value}`);const u=await W(e,null);u.result?(d.value=u.data,N.value=!1):u.errMsg=="\u672A\u767B\u5F55"&&E.push("/login")}function P(n){p(n)}function I(n){g.value=!0,a.value={...n}}function F(n){const e=n==="edit"?c.value:b.value;e&&e.resetFields(),a.value={id:"",settleCode:"",settleName:"",sequenceNo:null}}async function L(){!c.value||await c.value.validate(n=>{n&&$("/settlecategory/update",a.value).then(e=>{e.data.result?(g.value=!1,p(d.value.current),C.success("\u4FEE\u6539\u6210\u529F")):C.error(e.data.errMsg||"\u4FEE\u6539\u5931\u8D25")})})}async function j(){!b.value||await b.value.validate(n=>{n&&$("/settlecategory/add",a.value).then(e=>{e.data.result?(v.value=!1,w.value=1,p(1),C.success("\u65B0\u589E\u6210\u529F")):C.error(e.data.errMsg||"\u65B0\u589E\u5931\u8D25")})})}function A(n){U.confirm("\u786E\u8BA4\u662F\u5426\u5220\u9664?","\u8B66\u544A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{var e=new FormData;e.append("id",n),$("/settlecategory/del",e).then(u=>{u.data.result?(p(d.value.current),U.alert("\u5220\u9664\u6210\u529F","\u63D0\u793A",{})):(result.errMsg=="\u672A\u767B\u5F55"&&E.push("/login"),U.alert(u.data.errMsg,"\u63D0\u793A",{}))})})}return(n,e)=>{const u=r("el-input"),i=r("el-button"),x=r("el-row"),_=r("el-table-column"),G=r("el-table"),q=r("el-col"),H=r("el-pagination"),J=r("el-option"),K=r("el-select"),f=r("el-form-item"),B=r("el-form"),R=r("el-dialog"),O=Z("loading");return M(),S(T,null,[l(x,{class:"search-bar"},{default:o(()=>[V("div",te,[l(u,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=t=>y.value=t),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u7C7B\u522B\u7F16\u7801\u6216\u540D\u79F0"},null,8,["modelValue"]),l(i,{type:"primary",onClick:e[1]||(e[1]=t=>p(1))},{default:o(()=>e[18]||(e[18]=[m("\u67E5\u8BE2")])),_:1,__:[18]})]),l(i,{type:"danger",onClick:e[2]||(e[2]=t=>v.value=!0)},{default:o(()=>e[19]||(e[19]=[m("\u65B0\u589E\u7ED3\u7B97\u7C7B\u522B")])),_:1,__:[19]})]),_:1}),e[26]||(e[26]=V("div",{style:{"margin-top":"40px"}},null,-1)),l(x,{class:"m-2"},{default:o(()=>[l(q,{span:24},{default:o(()=>[h((M(),ee(G,{data:d.value.records,style:{width:"100%"}},{default:o(()=>[l(_,{fixed:"",type:"index",label:"\u5E8F\u53F7",align:"center",width:"80",index:t=>(d.value.current-1)*d.value.size+t+1},null,8,["index"]),l(_,{prop:"settleCode",label:"\u7C7B\u522B\u7F16\u7801",align:"center"}),l(_,{prop:"settleName",label:"\u7C7B\u522B\u540D\u79F0",align:"center"}),l(_,{prop:"sequenceNo",label:"\u663E\u793A\u987A\u5E8F\u53F7",align:"center"}),l(_,{fixed:"right",label:"\u64CD\u4F5C",align:"center"},{default:o(t=>[l(i,{link:"",type:"primary",onClick:Q=>I(t.row)},{default:o(()=>e[20]||(e[20]=[m("\u7F16\u8F91")])),_:2,__:[20]},1032,["onClick"]),l(i,{link:"",type:"danger",onClick:Q=>A(t.row.id)},{default:o(()=>e[21]||(e[21]=[m("\u5220\u9664")])),_:2,__:[21]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,N.value]])]),_:1})]),_:1}),e[27]||(e[27]=V("div",{style:{"margin-top":"20px"}},null,-1)),l(x,null,{default:o(()=>[l(q,{span:20},{default:o(()=>[l(H,{background:"",layout:"prev, pager, next",total:d.value.total,"page-count":d.value.pages,"current-page":w.value,"onUpdate:currentPage":e[3]||(e[3]=t=>w.value=t),onCurrentChange:P},null,8,["total","page-count","current-page"])]),_:1}),l(q,{span:4},{default:o(()=>[l(K,{modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=t=>k.value=t),class:"w-20 m-2",placeholder:"\u6BCF\u9875\u884C\u6570",onChange:e[5]||(e[5]=t=>p(1))},{default:o(()=>[(M(),S(T,null,le(z,t=>l(J,{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(R,{modelValue:g.value,"onUpdate:modelValue":e[10]||(e[10]=t=>g.value=t),title:"\u7F16\u8F91",onClose:e[11]||(e[11]=t=>F("edit"))},{footer:o(()=>[V("span",oe,[l(i,{onClick:e[9]||(e[9]=t=>g.value=!1)},{default:o(()=>e[22]||(e[22]=[m("\u53D6\u6D88")])),_:1,__:[22]}),l(i,{type:"primary",onClick:L},{default:o(()=>e[23]||(e[23]=[m(" \u4FDD\u5B58 ")])),_:1,__:[23]})])]),default:o(()=>[l(B,{model:a.value,rules:D.value,ref_key:"editFormRef",ref:c,"label-width":"100px"},{default:o(()=>[l(f,{label:"\u7C7B\u522B\u7F16\u7801",prop:"settleCode"},{default:o(()=>[l(u,{modelValue:a.value.settleCode,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.settleCode=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u7C7B\u522B\u540D\u79F0",prop:"settleName"},{default:o(()=>[l(u,{modelValue:a.value.settleName,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.settleName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u663E\u793A\u987A\u5E8F\u53F7",prop:"sequenceNo"},{default:o(()=>[l(u,{modelValue:a.value.sequenceNo,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.sequenceNo=t),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),l(R,{modelValue:v.value,"onUpdate:modelValue":e[16]||(e[16]=t=>v.value=t),title:"\u65B0\u589E",onClose:e[17]||(e[17]=t=>F("add"))},{footer:o(()=>[V("span",ae,[l(i,{onClick:e[15]||(e[15]=t=>v.value=!1)},{default:o(()=>e[24]||(e[24]=[m("\u53D6\u6D88")])),_:1,__:[24]}),l(i,{type:"primary",onClick:j},{default:o(()=>e[25]||(e[25]=[m(" \u65B0\u589E ")])),_:1,__:[25]})])]),default:o(()=>[l(B,{model:a.value,rules:D.value,ref_key:"addFormRef",ref:b,"label-width":"100px"},{default:o(()=>[l(f,{label:"\u7C7B\u522B\u7F16\u7801",prop:"settleCode"},{default:o(()=>[l(u,{modelValue:a.value.settleCode,"onUpdate:modelValue":e[12]||(e[12]=t=>a.value.settleCode=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u7C7B\u522B\u540D\u79F0",prop:"settleName"},{default:o(()=>[l(u,{modelValue:a.value.settleName,"onUpdate:modelValue":e[13]||(e[13]=t=>a.value.settleName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u663E\u793A\u987A\u5E8F\u53F7",prop:"sequenceNo"},{default:o(()=>[l(u,{modelValue:a.value.sequenceNo,"onUpdate:modelValue":e[14]||(e[14]=t=>a.value.sequenceNo=t),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}};var de=X(ne,[["__scopeId","data-v-677098b2"]]);export{de as default};
