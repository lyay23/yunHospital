import{_ as j,u as G,a as J,k as Q,r as g,l as W,b as t,o as _,d as w,h as o,g as a,m as y,i as x,e as C,t as V,n as X,F as B,p as E,f as v,K as Y,q as Z}from"./index.eaac7b27.js";import{p as $}from"./api.12427e84.js";const ee={class:"home_container"},ne={class:"home_userinfoContainer"},te={__name:"Home",setup(oe){const d=G(),b=J(),u=Q(()=>{const n=b.getUserInfo.value.useType,e=d.options.routes.find(l=>l.role==n);return e?(n===170&&e.children&&!e.children.find(l=>l.path==="/operationlog")&&e.children.push({path:"/operationlog",name:"\u64CD\u4F5C\u65E5\u5FD7"}),e):(y.error("\u672A\u627E\u5230\u5BF9\u5E94\u7684\u83DC\u5355\u914D\u7F6E"),{children:[]})}),i=g(""),p=g([]);g(0);function N(n){return!u.value||!u.value.children?null:u.value.children.find(e=>e.path==n)}function S(n){n&&n.paneName&&d.push(n.paneName)}function T(n){if(!n)return;let e=N(n);if(!e){y.warning("\u672A\u627E\u5230\u5BF9\u5E94\u7684\u9875\u9762\u7EC4\u4EF6");return}p.value.find(l=>l.name==e.path)||p.value.push({title:e.name,name:e.path,route:e.path}),i.value=e.path,d.push(e.path)}function H(n,e){var m;if(e!=="remove")return;let l=p.value,c=i.value;if(c===n&&l.forEach((s,f)=>{if(s.name===n){let h=l[f+1]||l[f-1];h&&(c=h.name)}}),i.value=c,p.value=l.filter(s=>s.name!==n),c)d.push(c);else{const s=(m=u.value.children[0])==null?void 0:m.path;s&&d.push(s)}}function I(n){n==="logout"&&$("/user/logout").then(e=>{e.data.result&&(b.logOut(),d.push("/login"))}).catch(e=>{y.error("\u9000\u51FA\u767B\u5F55\u5931\u8D25")})}return W(()=>{if(p.value.length===0&&u.value.children.length>0){const n=u.value.children[0].path;T(n)}}),(n,e)=>{const l=t("el-text"),c=t("el-avatar"),m=t("arrow-down"),s=t("el-icon"),f=t("el-button"),h=t("el-dropdown-item"),U=t("el-dropdown-menu"),P=t("el-dropdown"),R=t("el-header"),q=t("document"),D=t("el-menu-item"),F=t("el-menu"),K=t("el-aside"),M=t("router-view"),z=t("el-tab-pane"),A=t("el-tabs"),L=t("el-main"),k=t("el-container");return _(),w("div",ee,[o(k,{class:"main-container"},{default:a(()=>[o(R,{class:"top-header"},{default:a(()=>[o(l,{class:"home_title"},{default:a(()=>e[1]||(e[1]=[x("\u4E1C\u8F6F\u4E91\u533B\u9662HIS\u7CFB\u7EDF")])),_:1,__:[1]}),C("div",ne,[o(P,{onCommand:I},{dropdown:a(()=>[o(U,null,{default:a(()=>[o(h,{command:"logout"},{default:a(()=>e[2]||(e[2]=[x("\u9000\u51FA\u767B\u5F55")])),_:1,__:[2]})]),_:1})]),default:a(()=>[o(f,{type:"primary"},{default:a(()=>[o(c,{size:"small",style:{"margin-right":"10px"},src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}),x(" "+V(X(b).getUserInfo.value.realName),1),o(s,{class:"el-icon--right"},{default:a(()=>[o(m)]),_:1})]),_:1})]),_:1})])]),_:1}),o(k,{class:"content-container"},{default:a(()=>[o(K,{width:"200px",class:"sidebar"},{default:a(()=>[o(F,{"default-active":i.value,class:"el-menu-vertical",router:"",onSelect:T},{default:a(()=>[(_(!0),w(B,null,E(u.value.children,r=>(_(),v(D,{index:r.path,key:r.path},{default:a(()=>[o(s,null,{default:a(()=>[o(q)]),_:1}),C("span",null,V(r.name),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])]),_:1}),o(L,{class:"main-content"},{default:a(()=>[o(A,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=r=>i.value=r),type:"card",closable:"",onEdit:H,onTabClick:S},{default:a(()=>[(_(!0),w(B,null,E(p.value,r=>(_(),v(z,{key:r.name,label:r.title,name:r.name},{default:a(()=>[o(M,null,{default:a(({Component:O})=>[(_(),v(Y,null,[(_(),v(Z(O)))],1024))]),_:1})]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])}}};var se=j(te,[["__scopeId","data-v-6528cec2"]]);export{se as default};
